---
title: New Containment Syntax & Units
---

The overall approach documented in my initial
[Proposal & Explainer](../explainer/)
has been approved by the CSSWG --
but there is still some interest
in adding explicit new syntax
for establishing containment,
as well as new container-relative units.

## General terminology

CSS already has many different types of containers,
containment, containing blocks, etc.
That doesn't necessarily mean
we have to avoid the term "container" entirely --
at this point we're leaning into it with `@container` --
but it does mean we need to define terms carefully.

These are a few of the essential parts,
and the names I'm currently using for them:

- **Container Query**:
  Refers to the entire `@container` rule block
- **Query Container**:
  An element with appropriate containment
  (or whatever else is required)
  to be observed by a _container query_.
- **Containment Context**:
  Context generated by the _query container_,
  which applies to all descendants
  until any nested query container
  establishes a new context.
- **Querying Element**:
  Any element targeted by a selector
  inside of a _container query_.
  The element queries the _containment context_
  established by its _nearest contained ancestor_.
- **Nearest Contained Ancestor**:
  A _querying element_
  will resolve a given _container query_
  based on the current _containment context_ --
  which is established by its nearest ancestor
  that is a _query container_.

As the spec develops,
I'm more convinced
that we'll need some new/better terms here.

## Observable containment

See [CSSWG-drafts issue #6174][6174]
for public discussion of this issue.

[6174]: https://github.com/w3c/csswg-drafts/issues/6174

There are several reasons to consider new syntax
for establishing observable containers:

- Dimensional queries will require containment
  of `layout`, `size` (1d or 2d), and `style`
  (but not `paint`).
  Ideally authors won't have to apply each individually.
- Different [query features](https://github.com/w3c/csswg-drafts/issues/5989)
  will require different types of containment
  (or even no containment at all).
- Authors might apply containment for other reasons,
  and not want to trigger a new containment context for queries.

Since the new syntax will need to set containment values,
currently defined by the `contain` property,
we should attempt to build on top of that existing property.

### Adding new values to `contain`

If all query features required containment,
we might think of them as shorthand values
added to the the `contain` property.
Much like the `strict` value,
something like `inline-query`
could apply values of `layout`, `inline-size`, and `style`:

```css
.container {
  contain: inline-query;
}
```

Another variant of this might involve a function syntax:

```css
.container {
  contain: query(inline-size);
}
```

Pros:

- we're not implicitly setting `contain` values
  based on some entirely separate property.

Cons:

- The difference between normal contain values
  (`inline-size`) and their query-alternates (`inline-query`)
  may be confusing in the same property
- If we allow queries that don't require containment values,
  this seems like the wrong place to specify them
- We'd expect the individual values to _add up_
  and have the same impact as the shorthand --
  which breaks our goal of making the behavior explicit.

### Adding a new property

There is already existing precedent
for other properties to "imply" containment.
[Content-visibility][]
doesn't change the computed value of `contain`,
but it does change the used/applied value --
triggering containment behavior.
We also have features like
[block formatting context][bfc]
that are triggered by
any number of different properties & combinations --
while also now having an explicit `display` value.

[Content-visibility]: https://drafts.csswg.org/css-contain-2/#content-visibility
[bfc]: https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context

From that perspective,
we can think of `contain`
as the explicit hook into
containment minutia --
but "containment" itself as a more generic behavior
that can be triggered in various ways.
Then we could add an explicit new property
custom-designed for establishing
query containers:

```css
.container {
  query: inline-size;
}
```

Pros:

- We don't need to differentiate between
  nearly-identical values with different behavior
  in the same property.
- We don't have to "desugar" the shorthand value
  into the same behavior as a set of longhand values.
- We're not constrained by the concept of "containment"
  when adding new query features.
- We can teach a single container-query specific syntax,
  and handle containment as an implementation detail.

Cons:

- Multiple properties that have the same underlying behavior
  could be confusing?

**At this point,
a new property seems to me
like the best path forward.**

## Query features



### Dimensional queries



## Container-relative units
